<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock-Paper-Scissors</title>
  </head>
  <body>
    <script>
      let user_score = 0;
      let computer_score = 0;
      startGame();

      function getComputer_choice() {
        let computerChoice = Math.floor(Math.random() * 3);
        if (computerChoice == 0)
          computerChoice = "rock";
        else if (computerChoice == 1)
          computerChoice = "paper";
        else if (computerChoice == 2)
          computerChoice = "scissors";
        return computerChoice;
      }

      function getUser_choice() {
        let choice = prompt("Enter your choice");
        while (choice == null || choice == undefined || choice == "")
        choice = prompt("Don't be a jerk, enter your choice please");
        choice = choice.toLowerCase();
        while ((choice != "rock") && (choice != "scissors") && (choice != "paper"))
          choice = prompt(`Ok NOOB, enter either "rock", "scissors" or "paper"`)
          choice = choice.toLowerCase();
          return choice;
      }

      function Rock_paper_scissors_game() {
        let user_choice = getUser_choice();
        let computer_choice = getComputer_choice();
        if (user_choice == computer_choice)
          alert("It's a tie!");
        else if ((user_choice == "rock") && (computer_choice == "scissors"))  {
          alert("You win; Rock beats Scissors!");
          user_score = user_score + 1;
        }
        else if ((user_choice == "scissors") && (computer_choice == "rock"))  {
          alert("You lose; Rock beats Scissors!");
          user_score = user_score + 1;
        }
        else if ((user_choice == "paper") && (computer_choice == "rock"))  {
          alert("You win; Paper beats Rock!");
          user_score = user_score + 1;
        }
        else if ((user_choice == "rock") && (computer_choice == "paper")) {
          alert("You lose; Paper beats Rock!");
          computer_score = computer_score + 1;
        }
        else if ((user_choice == "scissors") && (computer_choice == "paper")) {
          alert("You win; Scissors beats Paper!");
          user_choice = user_choice + 1;
        }
        else if ((user_choice == "paper") && (computer_choice == "scissors")) {
          alert("You lose; Scissors beats Paper!");
          computer_score = computer_score + 1;
        }
      }

      function startGame() {
        let answer = prompt("This is a Rock-Paper-Scissors game. Ready to play? (y/n): ");
        if (answer == null || answer == undefined) return 0;
        else  {
          Rock_paper_scissors_game();
          Rock_paper_scissors_game();
          Rock_paper_scissors_game();
          Rock_paper_scissors_game();
          Rock_paper_scissors_game();
          alert(`Final score:\nYou: ${user_score}\nComputer: ${computer_score}`);
          if (user_score == computer_score)
            alert("It's a tie. Tough battle!");
          else if (user_score > computer_score)
            alert("You win the game. Well played!");
          else
            alert("You lost the game. Not good enough");
        }
      }
    </script>
    </body
</html>
